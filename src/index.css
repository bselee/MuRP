@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom dark mode variant - uses .dark class on any ancestor */
@custom-variant dark (&:where(.dark, .dark *));

@layer base {
  :root {
    --surface-100: #050506;
    --surface-200: rgba(6, 8, 12, 0.9);
    --surface-300: rgba(15, 23, 42, 0.35);
    --border-faint: rgba(255, 255, 255, 0.08);
    --border-strong: rgba(255, 255, 255, 0.18);
    --shadow-strong: 0 25px 65px rgba(0, 0, 0, 0.65);
    --shadow-soft: inset 0 0 35px rgba(0, 0, 0, 0.45);
    --text-color: #f4f5f7;
    --table-cell-py: 0.4rem;
    --table-cell-font: 0.84rem;
    --table-line-height: 1.4;
    --panel-light-surface: rgba(255, 255, 255, 0.92);
    --panel-light-muted-surface: rgba(255, 255, 255, 0.87);
    --panel-light-border: rgba(89, 62, 25, 0.14);
    --text-light-strong: #2b1a10;
    --text-light-muted: #7c6b63;
  }

  [data-theme='light'] {
    --surface-100: #f8f5f1;
    --surface-200: rgba(255, 255, 255, 0.88);
    --surface-300: rgba(241, 232, 223, 0.65);
    --border-faint: rgba(12, 10, 9, 0.06);
    --border-strong: rgba(12, 10, 9, 0.18);
    --shadow-strong: 0 25px 55px rgba(15, 23, 42, 0.12);
    --shadow-soft: inset 0 0 35px rgba(15, 23, 42, 0.08);
    --text-color: #1a1814;
    --panel-light-surface: rgba(255, 255, 255, 0.96);
    --panel-light-muted-surface: rgba(248, 240, 226, 0.92);
    --panel-light-border: rgba(92, 63, 33, 0.2);
    --text-light-strong: #2b1a10;
    --text-light-muted: #8c7460;
  }

  [data-row-density='comfortable'] {
    --table-cell-py: 0.65rem;
    --table-line-height: 1.55;
  }

  [data-row-density='compact'] {
    --table-cell-py: 0.4rem;
    --table-line-height: 1.35;
  }

  [data-row-density='ultra'] {
    --table-cell-py: 0.2rem;
    --table-line-height: 1.2;
  }

  [data-font-scale='small'] {
    --table-cell-font: 0.78rem;
  }

  [data-font-scale='medium'] {
    --table-cell-font: 0.84rem;
  }

  [data-font-scale='large'] {
    --table-cell-font: 0.92rem;
  }

  html,
  body,
  #root {
    min-height: 100%;
  }

  body {
    @apply font-sans antialiased relative;
    color: var(--text-color);
    background: radial-gradient(circle at 15% 20%, rgba(79, 70, 229, 0.15), transparent 35%),
      radial-gradient(circle at 85% 10%, rgba(236, 72, 153, 0.12), transparent 30%),
      linear-gradient(160deg, #050505, #020202 65%);
  }

  body[data-theme='light'] {
    background: radial-gradient(circle at 10% 20%, rgba(253, 221, 155, 0.35), transparent 40%),
      radial-gradient(circle at 80% 0%, rgba(255, 255, 255, 0.6), transparent 35%),
      linear-gradient(140deg, #fdf8f3, #efe3d4 60%, #f5f0ea);
  }

  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at 50% 0%, rgba(255, 255, 255, 0.04), transparent 45%);
    pointer-events: none;
    z-index: 0;
  }

  body[data-theme='light']::after {
    background: radial-gradient(circle at 50% -10%, rgba(255, 255, 255, 0.6), transparent 45%);
  }

  input,
  textarea,
  select {
    @apply rounded-xl px-3 py-2 shadow-inner shadow-black/40 transition-all duration-200 backdrop-blur-lg placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-slate-200/40 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed;
    background: rgba(2, 4, 9, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--text-color);
  }

  textarea {
    @apply min-h-[120px] resize-y;
  }

  label {
    @apply text-sm font-medium text-gray-300;
  }

  [data-theme='light'] input,
  [data-theme='light'] textarea,
  [data-theme='light'] select {
    background: rgba(255, 255, 255, 0.92);
    border-color: rgba(12, 10, 9, 0.12);
    color: #1a1814;
    box-shadow: inset 0 0 18px rgba(15, 23, 42, 0.05);
  }

  [data-theme='light'] textarea::placeholder,
  [data-theme='light'] input::placeholder {
    color: rgba(15, 23, 42, 0.35);
  }

  [data-theme='light'] label {
    @apply text-gray-700;
  }

  .workspace-surface {
    position: relative;
    isolation: isolate;
  }

  [data-theme='light'] .workspace-surface {
    color: var(--text-light-strong);
    background: var(--panel-light-surface);
    border-color: var(--panel-light-border);
    box-shadow: 0 30px 60px rgba(15, 23, 42, 0.18);
  }

  [data-theme='light'] .workspace-surface [class*='text-white']:not(button):not([data-murp-button]) {
    color: var(--text-light-strong);
  }

  [data-theme='light'] .workspace-surface [class*='text-gray-100']:not(button):not([data-murp-button]) {
    color: var(--text-light-strong);
  }

  [data-theme='light'] .workspace-surface [class*='text-gray-200']:not(button):not([data-murp-button]) {
    color: #4f3a2a;
  }

  [data-theme='light'] .workspace-surface [class*='text-gray-300']:not(button):not([data-murp-button]) {
    color: #64503f;
  }

  [data-theme='light'] .workspace-surface [class*='text-gray-400']:not(button):not([data-murp-button]) {
    color: var(--text-light-muted);
  }

  [data-theme='light'] .workspace-surface [class*='text-gray-500']:not(button):not([data-murp-button]) {
    color: #9a8370;
  }

  [data-theme='light'] .workspace-surface [class*='bg-gray-900'] {
    background-color: var(--panel-light-surface);
    color: var(--text-light-strong);
    border-color: var(--panel-light-border);
    box-shadow: 0 22px 55px rgba(15, 23, 42, 0.18);
  }

  [data-theme='light'] .workspace-surface [class*='bg-gray-800'] {
    background-color: var(--panel-light-muted-surface);
    color: var(--text-light-strong);
    border-color: rgba(92, 63, 33, 0.15);
  }

  [data-theme='light'] .workspace-surface [class*='bg-gray-700'],
  [data-theme='light'] .workspace-surface [class*='bg-gray-600'] {
    background-color: rgba(247, 229, 205, 0.75);
    color: var(--text-light-strong);
    border-color: rgba(92, 63, 33, 0.12);
  }

  [data-theme='light'] .workspace-surface .border-gray-700,
  [data-theme='light'] .workspace-surface .border-gray-600,
  [data-theme='light'] .workspace-surface .border-gray-800 {
    border-color: var(--panel-light-border) !important;
  }

  [data-theme='light'] .workspace-surface .divide-gray-700 > :not([hidden]) ~ :not([hidden]) {
    border-color: rgba(96, 70, 45, 0.22);
  }

  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: rgba(148, 163, 184, 0.25);
    border-radius: 999px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgba(148, 163, 184, 0.45);
  }
}

@layer utilities {
  .glass-panel {
    @apply bg-gray-950/70 border border-white/10 rounded-2xl shadow-[0_25px_65px_rgba(0,0,0,0.65)] backdrop-blur-2xl;
  }

  .glass-panel-muted {
    @apply bg-gray-900/60 border border-white/5 rounded-xl shadow-[0_15px_45px_rgba(0,0,0,0.45)] backdrop-blur-xl;
  }

  [data-theme='light'] .glass-panel {
    background: rgba(255, 255, 255, 0.9);
    border-color: rgba(12, 10, 9, 0.08);
    box-shadow: 0 25px 55px rgba(15, 23, 42, 0.18);
  }

  [data-theme='light'] .glass-panel-muted {
    background: rgba(255, 255, 255, 0.85);
    border-color: rgba(12, 10, 9, 0.08);
    box-shadow: 0 15px 35px rgba(15, 23, 42, 0.12);
  }

  [data-theme='light'] button[data-variant='primary'] {
    background: linear-gradient(140deg, #fffdf9, #f3e8d5);
    color: #1a1814;
    border-color: rgba(12, 10, 9, 0.08);
    box-shadow: 0 18px 35px rgba(15, 23, 42, 0.15);
  }

  [data-theme='light'] button[data-variant='secondary'] {
    background: rgba(249, 246, 241, 0.9);
    color: #1d1b18;
    border-color: rgba(12, 10, 9, 0.08);
  }

  [data-theme='light'] button[data-variant='ghost'] {
    color: #2b2620;
  }

  .table-density {
    width: 100%;
  }

  .table-density th,
  .table-density td {
    padding-top: var(--table-cell-py) !important;
    padding-bottom: var(--table-cell-py) !important;
    font-size: var(--table-cell-font);
    line-height: var(--table-line-height);
  }

  .inventory-row {
    transition: background-color 200ms ease, box-shadow 200ms ease;
  }

  .inventory-row-even {
    background-color: rgba(255, 255, 255, 0.015);
  }

  .inventory-row-odd {
    background-color: rgba(15, 23, 42, 0.08);
  }

  .inventory-row:hover {
    background-color: rgba(255, 255, 255, 0.045);
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.04);
  }

  [data-theme='light'] .inventory-row-even {
    background-color: rgba(15, 23, 42, 0.03);
  }

  [data-theme='light'] .inventory-row-odd {
    background-color: rgba(15, 23, 42, 0.06);
  }

  [data-theme='light'] .inventory-row:hover {
    background-color: rgba(15, 23, 42, 0.12);
    box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.08);
  }
}
